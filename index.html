<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#f4a63a" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./style.css" />
  <title>ç‹¼äººæ®ºä¸Šå¸è¼”åŠ©</title>
</head>

<body>
  <div class="app">
    <!-- ===== Top fixed ===== -->
    <div class="top">
      <div class="topLeft">
        <div id="uiStatus" class="uiStatus">â€”</div>
        <div id="uiBoard" class="uiBoard">â€”</div>
      </div>

      <div class="topRight">
        <!-- âœ… Timer drawer -->
        <button type="button" id="btnHourglass" class="iconBtn" aria-label="è¨ˆæ™‚å™¨">âŒ›ï¸</button>
        <button type="button" id="btnDice" class="iconBtn" aria-label="ç™¼è¨€éª°å­">ğŸ²</button>

        <!-- âœ… God eye on top -->
        <button type="button" id="btnGodEye" class="iconBtn" aria-label="ä¸Šå¸è³‡è¨Š">ğŸ‘</button>

        <button type="button" id="btnSettings" class="iconBtn" aria-label="è¨­å®š">âš™ï¸</button>
      </div>
    </div>

    <!-- ===== Main scroll area (combine flow + seats + god) ===== -->
    <main class="content" id="mainContent">
      <!-- FLOW / PROMPT -->
      <section class="card">
        <div class="cardTitle" id="promptTitle">â€”</div>
        <pre class="cardText scrollBox" id="promptText">â€”</pre>

        <div class="toolRow" id="toolRow">
          <button type="button" id="btnVoteDrawer" class="btn ghost small hidden">æŠ•ç¥¨å…¬å‘Š</button>
        </div>

        <div class="cardFoot" id="promptFoot"></div>
      </section>

      <!-- Board picker -->
      <section class="card" id="boardPickerCard">
        <div class="row">
          <div class="cardTitle">å¯é¸æ¿å­</div>
          <div class="hint">é»ä¸€ä¸‹å¥—ç”¨ï¼ˆé¸ä¸­æœƒè®Šè‰²ï¼‰</div>
        </div>

        <div class="hint" id="boardPickerHint"></div>
        <div id="boardPicker" class="boardPicker"></div>
      </section>

      <!-- SEATS -->
      <section class="card tight">
        <div class="row">
          <div class="cardTitle">åº§ä½</div>
          <div class="hint">é»åº§ä½æ“ä½œï¼ˆä¾æµç¨‹æç¤ºï¼‰</div>
        </div>
      </section>
      <section id="seatsGrid" class="seatsGrid"></section>

      <!-- GOD -->
      <section class="card" id="godCard">
        <div class="row">
          <div class="cardTitle">ä¸Šå¸è³‡è¨Š</div>

          <!-- âœ… checkbox controls collapse via CSS sibling -->
          <label class="toggle">
            <input id="toggleGodView" type="checkbox" />
            <span>ğŸ‘ å±•é–‹</span>
          </label>
        </div>

        <div class="godBody">
          <pre class="cardText scrollBox" id="godText"></pre>
        </div>
      </section>
    </main>

    <!-- ===== Bottom fixed action bar ===== -->
    <div class="bottomDock">
      <div class="actionBar">
        <button type="button" id="btnBack" class="btn ghost">ä¸Šä¸€æ­¥</button>
        <button type="button" id="btnPrimary" class="btn">ä¸‹ä¸€æ­¥</button>
        <button type="button" id="btnCancel" class="btn ghost">å–æ¶ˆ</button>
      </div>
    </div>
  </div>

  <!-- ===================== Timer Drawer (âŒ›ï¸) ===================== -->
  <div id="timerDrawerBackdrop" class="backdrop hidden"></div>
  <div id="timerDrawer" class="drawer hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="drawerTop">
      <div class="drawerTitle">âŒ›ï¸ è¨ˆæ™‚å™¨</div>
      <button type="button" id="btnCloseTimerDrawer" class="iconBtn" aria-label="é—œé–‰">âœ•</button>
    </div>

    <div class="drawerBody">
      <div class="timerBigWrap">
        <div class="timerBigLabel">å€’æ•¸</div>
        <div id="timerBig" class="timerBig">01:30</div>
      </div>

      <div class="divider"></div>

      <div class="timerPresets" id="timerPresets">
        <button type="button" class="chip" data-sec="30">30ç§’</button>
        <button type="button" class="chip" data-sec="60">1åˆ†é˜</button>
        <button type="button" class="chip" data-sec="90">1åˆ†åŠ</button>
        <button type="button" class="chip" data-sec="120">2åˆ†é˜</button>
        <button type="button" class="chip" data-sec="180">3åˆ†é˜</button>
        <button type="button" class="chip" data-sec="300">5åˆ†é˜</button>
      </div>

      <div class="timerActions">
        <button type="button" class="chip primary" id="btnTimerStart">é–‹å§‹</button>
        <button type="button" class="chip" id="btnTimerPause">æš«åœ</button>
        <button type="button" class="chip" id="btnTimerReset">é‡ç½®</button>
      </div>

      <div class="hint" style="margin-top:10px;">
        æé†’ï¼šè¨ˆæ™‚åˆ° 0 æœƒéœ‡å‹•ï¼ˆè‹¥æ‰‹æ©Ÿå…è¨±ï¼‰ã€‚
      </div>
    </div>
  </div>

  <!-- ===================== Settings Drawer ===================== -->
  <div id="drawerBackdrop" class="backdrop hidden"></div>
  <div id="drawer" class="drawer hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="drawerTop">
      <div class="drawerTitle">è¨­å®š</div>
      <button type="button" id="btnCloseDrawer" class="iconBtn" aria-label="é—œé–‰">âœ•</button>
    </div>
    <div class="drawerBody">
      <div class="seg">
        <button type="button" id="segEdge" class="segBtn">å± é‚Š</button>
        <button type="button" id="segCity" class="segBtn">å± åŸ</button>
      </div>

      <label class="row settingRow">
        <span>ä¸Šè­¦</span>
        <input id="togglePolice" type="checkbox" />
      </label>

      <button type="button" id="btnReset" class="btn ghost" style="width:100%;">é‡ç½®æœ¬å±€</button>
    </div>
  </div>

  <!-- ===================== Vote announce drawer ===================== -->
  <div id="voteDrawerBackdrop" class="backdrop hidden"></div>
  <div id="voteDrawer" class="drawer hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="drawerTop">
      <div class="drawerTitle">æŠ•ç¥¨å…¬å‘Š</div>
      <button type="button" id="btnCloseVoteDrawer" class="iconBtn" aria-label="é—œé–‰">âœ•</button>
    </div>
    <div class="drawerBody">
      <pre id="voteAnnounceText" class="cardText" style="white-space:pre-wrap; margin:0;"></pre>
    </div>
  </div>

  <!-- ===================== Role modal ===================== -->
  <div id="roleModal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTitle" id="roleModalTitle">â€”</div>
      <div class="modalBody">
        <div class="roleLine" id="roleModalRole">â€”</div>
        <div class="roleLine small" id="roleModalCamp">â€”</div>
        <div class="hint" style="margin-top:10px;">çœ‹å®Œè«‹æŠŠæ‰‹æ©Ÿäº¤å›ä¸Šå¸ ğŸº</div>
      </div>
      <div class="modalActions">
        <button type="button" id="btnRoleDone" class="btn">æˆ‘çœ‹å®Œäº†</button>
        <button type="button" id="btnRoleClose" class="btn ghost">é—œé–‰</button>
      </div>
    </div>
  </div>

  <!-- ===================== Dice modal ===================== -->
  <div id="diceModal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTitle">ğŸ² ä»Šæ—¥ç™¼è¨€é †åº</div>
      <div class="modalBody">
        <div id="diceResult" class="diceResult">â€”</div>
        <div class="hint" style="margin-top:10px;">ï¼ˆåªæœƒå¾ã€Œå­˜æ´»åº§ä½ã€éš¨æ©ŸæŠ½ï¼‰</div>
      </div>
      <div class="modalActions">
        <button type="button" id="btnDiceAgain" class="btn">å†æ“²ä¸€æ¬¡</button>
        <button type="button" id="btnDiceClose" class="btn ghost">é—œé–‰</button>
      </div>
    </div>
  </div>

  <!-- âœ… small glue: close timer drawer -->
  <script>
    (function(){
      const $ = (s)=>document.querySelector(s);
      const bd = $("#timerDrawerBackdrop");
      const dr = $("#timerDrawer");
      const close = $("#btnCloseTimerDrawer");

      function hide(){
        if(bd) bd.classList.add("hidden");
        if(dr){
          dr.classList.add("hidden");
          dr.setAttribute("aria-hidden","true");
        }
      }
      if(close) close.addEventListener("click", hide);
      if(bd) bd.addEventListener("click", hide);

      // checkbox collapse (default: collapsed)
      const t = $("#toggleGodView");
      if(t && !t.checked) {
        // keep default collapsed for cleaner screen
      }
    })();
  </script>

  <script src="./app.js"></script>
</body>
</html>