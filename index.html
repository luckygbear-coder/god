<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#f4a63a" />
  <title>狼人殺上帝輔助</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./style.css" />

  <style>
    body{ -webkit-touch-callout:none; -webkit-user-select:none; user-select:none; touch-action:manipulation; }
  </style>
</head>

<body>
  <div class="app-wrap">

    <!-- ===== 頂部狀態 ===== -->
    <div class="topbar card">
      <div>
        <div id="uiStatus" class="small muted">SETUP</div>
        <div id="uiBoard" class="title">—</div>
      </div>
      <div class="row" style="gap:8px;">
        <button id="btnSettings" class="iconbtn" title="設定">⚙️</button>
      </div>
    </div>

    <!-- ===== 提示區 ===== -->
    <div class="card">
      <div class="h2" id="promptTitle">—</div>
      <div class="preline" id="promptText"></div>
      <div class="small muted" id="promptFoot"></div>
    </div>

    <!-- ✅ 板子選擇（A2） -->
    <div class="card" id="boardPickerCard">
      <div class="h3">選擇板子</div>
      <div class="small muted" id="boardPickerHint">請先選人數，才會顯示可用板子。</div>
      <div id="boardPicker" class="board-picker"></div>
    </div>

    <!-- ===== 上帝資訊 ===== -->
    <div class="card">
      <label class="row-between">
        <div class="h3">上帝資訊</div>
        <label class="row">
          <input type="checkbox" id="toggleGodView" />
          <span class="small">👁️ 展開</span>
        </label>
      </label>
      <div id="godText" class="small muted preline"></div>
    </div>

    <!-- ===== 座位區 ===== -->
    <div id="seatsGrid" class="seats-grid"></div>

    <!-- ✅ 常駐倒數計時 -->
    <section class="timer-panel">
      <div class="timer-left">
        <div class="timer-label">⏱️ 倒數計時</div>
        <div class="timer-big" id="timerBig">00:00</div>
        <div class="timer-hint" id="timerHint">點選時間或按「開始」。</div>
      </div>

      <div class="timer-right">
        <div class="timer-presets" id="timerPresets">
          <button type="button" data-sec="60">1分</button>
          <button type="button" data-sec="120">2分</button>
          <button type="button" data-sec="180">3分</button>
          <button type="button" data-sec="300">5分</button>
        </div>
        <div class="timer-actions">
          <button type="button" id="btnTimerStart">開始</button>
          <button type="button" id="btnTimerPause">暫停</button>
          <button type="button" id="btnTimerReset">重置</button>
        </div>
      </div>
    </section>

    <div style="height:96px;"></div>
  </div>

  <!-- ===== 底部操作列 ===== -->
  <div class="actionbar">
    <button id="btnBack" class="btn ghost">上一步</button>
    <button id="btnPrimary" class="btn primary">下一步</button>
    <button id="btnCancel" class="btn ghost">取消</button>
  </div>

  <!-- ===== 設定視窗 ===== -->
  <div id="drawerBackdrop" class="backdrop hidden"></div>
  <div id="drawer" class="drawer hidden">
    <div class="drawer-hd">
      <div class="h2">設定</div>
      <button id="btnCloseDrawer" class="iconbtn">✕</button>
    </div>

    <div class="drawer-bd">
      <div class="h3">勝負模式</div>
      <div class="seg">
        <button id="segEdge" type="button">屠邊</button>
        <button id="segCity" type="button">屠城</button>
      </div>

      <label class="row-between">
        <span>上警（先保留開關）</span>
        <input type="checkbox" id="togglePolice" />
      </label>

      <button id="btnReset" class="btn danger" type="button">重置本局</button>

      <div class="small muted" style="margin-top:10px; line-height:1.5;">
        小提醒：iOS 若更新沒生效，請重整兩次或清除網站資料（SW 快取）。
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>