<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç‹¼äººæ®ºä¸Šå¸è¼”åŠ©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

<div class="app">

  <!-- Header -->
  <header class="top-bar">
    <h1>ğŸº ç‹¼äººæ®ºä¸Šå¸</h1>
    <button id="godToggle" onclick="toggleGodMode()">ğŸ”’</button>
  </header>

  <!-- ä¸»å…§å®¹ -->
  <main id="main" class="main">
    <h2>è«‹é¸æ“‡æ¿å­é–‹å§‹éŠæˆ²</h2>
  </main>

  <!-- Footer æ“ä½œåˆ— -->
  <footer class="bottom-bar">
    <button onclick="showRoleBook()">ğŸ“– è§’è‰²åœ–é‘‘</button>
    <button onclick="showLogs()">ğŸ“œ ç´€éŒ„</button>
  </footer>

</div>

<!-- ä¸Šå¸ PIN -->
<div id="godLock" class="modal hidden">
  <div class="modal-card">
    <h3>ä¸Šå¸æ¨¡å¼</h3>
    <input type="password" id="godPin" placeholder="è¼¸å…¥ PIN" />
    <button onclick="unlockGod()">è§£é–</button>
  </div>
</div>

<!-- è§’è‰²åœ–é‘‘ -->
<div id="roleBook" class="modal hidden">
  <div class="modal-card scroll">
    <h3>è§’è‰²åœ–é‘‘</h3>
    <div id="roleList"></div>
    <button onclick="closeRoleBook()">é—œé–‰</button>
  </div>
</div>

<!-- ç´€éŒ„ -->
<div id="logModal" class="modal hidden">
  <div class="modal-card scroll">
    <h3>éŠæˆ²ç´€éŒ„</h3>
    <div id="logList"></div>
    <button onclick="closeLogs()">é—œé–‰</button>
  </div>
</div>

<script type="module" src="./app.js"></script>
<script>
/* ======================
   ä¸Šå¸æ¨¡å¼
====================== */

let godMode = false;
const GOD_PIN = "1234";

function toggleGodMode() {
  if (!godMode) {
    document.getElementById("godLock").classList.remove("hidden");
  } else {
    godMode = false;
    document.getElementById("godToggle").innerText = "ğŸ”’";
    document.body.classList.remove("god");
  }
}

function unlockGod() {
  const pin = document.getElementById("godPin").value;
  if (pin === GOD_PIN) {
    godMode = true;
    document.getElementById("godToggle").innerText = "ğŸ‘ï¸";
    document.body.classList.add("god");
    document.getElementById("godLock").classList.add("hidden");
  } else {
    alert("PIN éŒ¯èª¤");
  }
}

/* ======================
   è§’è‰²åœ–é‘‘
====================== */

import ROLES from "./roles.js";

function showRoleBook() {
  const list = document.getElementById("roleList");
  list.innerHTML = Object.values(ROLES)
    .map(
      r => `
      <div class="card">
        <h4>${r.name}</h4>
        <p>${r.skill}</p>
        ${godMode ? `<small>${r.godNote}</small>` : ""}
      </div>`
    )
    .join("");
  document.getElementById("roleBook").classList.remove("hidden");
}

function closeRoleBook() {
  document.getElementById("roleBook").classList.add("hidden");
}

/* ======================
   ç´€éŒ„
====================== */

function showLogs() {
  const list = document.getElementById("logList");
  list.innerHTML = (window.Game?.logs || [])
    .map(l => `<p>â€¢ ${l}</p>`)
    .join("");
  document.getElementById("logModal").classList.remove("hidden");
}

function closeLogs() {
  document.getElementById("logModal").classList.add("hidden");
}
</script>

</body>
</html>
