<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#f4a63a" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./style.css" />
  <title>狼人殺上帝輔助</title>
</head>

<body>
  <div class="app">
    <!-- TOP (fixed) -->
    <header class="top">
      <div class="topLeft">
        <div id="uiStatus" class="uiStatus">SETUP</div>
        <div id="uiBoard" class="uiBoard">—</div>
      </div>

      <div class="topRight">
        <button type="button" id="btnHourglass" class="iconBtn" aria-label="計時器">⌛️</button>
        <button type="button" id="btnDice" class="iconBtn" aria-label="發言骰子">🎲</button>
        <button type="button" id="btnGodEye" class="iconBtn" aria-label="上帝視角">👁️</button>
        <button type="button" id="btnSettings" class="iconBtn" aria-label="設定">⚙️</button>
      </div>
    </header>

    <!-- MAIN (scroll inside, no page scroll) -->
    <main class="main">
      <!-- FLOW CARD -->
      <section class="col colFlow">
        <div class="card">
          <div class="cardTitle" id="promptTitle">—</div>
          <pre class="cardText scrollBox" id="promptText">—</pre>
          <div class="cardFoot" id="promptFoot"></div>
        </div>

        <!-- SETUP ONLY -->
        <div id="setupArea" class="setupArea">
          <div class="card">
            <div class="cardTitle">開局設定</div>
            <div class="hint">先選人數與板子；進入遊戲後此區會隱藏（要改請到 ⚙️ 設定）。</div>

            <div class="setupRow">
              <div class="setupLabel">人數</div>
              <div class="setupChips" id="peopleChips">
                <button type="button" class="chip" data-n="9">9人</button>
                <button type="button" class="chip" data-n="10">10人</button>
                <button type="button" class="chip" data-n="12">12人</button>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="row">
              <div class="cardTitle">可選板子</div>
              <div class="hint">點一下套用（選中會變色）</div>
            </div>
            <div id="boardPicker" class="boardPicker"></div>
          </div>
        </div>
      </section>

      <!-- SEATS (GAME ONLY) -->
      <section class="col colSeats hidden" id="seatsArea">
        <div class="card tight">
          <div class="row">
            <div class="cardTitle">座位</div>
            <div class="hint" id="seatHint">長按 0.3 秒翻牌（抽身分階段）</div>
          </div>
        </div>
        <div id="seatsGrid" class="seatsGrid"></div>

        <div class="card tight" id="godInlineCard">
          <div class="row">
            <div class="cardTitle">上帝資訊（摘要）</div>
            <div class="hint">按右上角 👁️ 開啟抽屜</div>
          </div>
          <pre class="cardText scrollBox" id="godSummary">—</pre>
        </div>
      </section>
    </main>

    <!-- BOTTOM (fixed) -->
    <footer class="bottomDock">
      <div class="actionBar">
        <button type="button" id="btnBack" class="btn ghost">上一步</button>
        <button type="button" id="btnPrimary" class="btn">下一步</button>
        <button type="button" id="btnCancel" class="btn ghost">取消</button>
      </div>
    </footer>
  </div>

  <!-- BACKDROP -->
  <div id="backdrop" class="backdrop hidden"></div>

  <!-- TIMER DRAWER -->
  <aside id="drawerTimer" class="drawer hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="drawerTop">
      <div class="drawerTitle">⌛️ 計時器</div>
      <button type="button" class="iconBtn" id="btnCloseTimer" aria-label="關閉">✕</button>
    </div>
    <div class="drawerBody">
      <div class="timerBig" id="timerBig">01:30</div>
      <div class="timerRow">
        <button type="button" class="chip" data-sec="30">30秒</button>
        <button type="button" class="chip" data-sec="60">1分鐘</button>
        <button type="button" class="chip" data-sec="90">1分半</button>
        <button type="button" class="chip" data-sec="120">2分鐘</button>
      </div>
      <div class="timerRow">
        <button type="button" class="chip primary" id="btnTimerStart">開始</button>
        <button type="button" class="chip" id="btnTimerPause">暫停</button>
        <button type="button" class="chip" id="btnTimerReset">重置</button>
      </div>
      <div class="hint">提示：完成會震動（若手機允許）。</div>
    </div>
  </aside>

  <!-- GOD DRAWER -->
  <aside id="drawerGod" class="drawer hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="drawerTop">
      <div class="drawerTitle">👁️ 上帝資訊</div>
      <button type="button" class="iconBtn" id="btnCloseGod" aria-label="關閉">✕</button>
    </div>
    <div class="drawerBody">
      <label class="row">
        <span>👁️ 上帝視角（座位顯示陣營/角色/標記）</span>
        <input id="toggleGodEye" type="checkbox" />
      </label>

      <div class="drawerSectionTitle">快速標記（先點一個座位再按）</div>
      <div class="markGrid">
        <button type="button" class="chip" data-mark="wolf">☠️ 狼刀</button>
        <button type="button" class="chip" data-mark="poison">☠️ 毒死</button>
        <button type="button" class="chip" data-mark="gun">☠️ 槍殺</button>
        <button type="button" class="chip" data-mark="black">☠️ 黑狼槍</button>
        <button type="button" class="chip" data-mark="white">☠️ 白狼爪</button>
        <button type="button" class="chip" data-mark="rescue">💊 被救</button>
        <button type="button" class="chip" data-mark="healUse">💊 解藥用在此</button>
        <button type="button" class="chip" data-mark="poisonUse">🧪 毒藥用在此</button>
        <button type="button" class="chip" data-mark="clear">🧽 清除標記</button>
      </div>

      <div class="drawerSectionTitle">摘要</div>
      <pre class="cardText scrollBox" id="godText">—</pre>
    </div>
  </aside>

  <!-- SETTINGS DRAWER -->
  <aside id="drawerSettings" class="drawer hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="drawerTop">
      <div class="drawerTitle">⚙️ 設定</div>
      <button type="button" class="iconBtn" id="btnCloseSettings" aria-label="關閉">✕</button>
    </div>
    <div class="drawerBody">
      <div class="drawerSectionTitle">更換開局</div>
      <button type="button" class="btn ghost" id="btnGoSetup" style="width:100%;">回到選人數/板子</button>
      <button type="button" class="btn danger" id="btnEndGame" style="width:100%; margin-top:10px;">結束本局（清除存檔）</button>
    </div>
  </aside>

  <!-- ROLE MODAL -->
  <div id="roleModal" class="modal hidden" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTitle" id="roleModalTitle">—</div>
      <div class="modalBody">
        <div class="roleLine" id="roleModalRole">—</div>
        <div class="roleLine small" id="roleModalCamp">—</div>
        <div class="hint" style="margin-top:10px;">看完請把手機交回上帝 🐺</div>
      </div>
      <div class="modalActions">
        <button type="button" id="btnRoleDone" class="btn">我看完了</button>
        <button type="button" id="btnRoleClose" class="btn ghost">關閉</button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>