:root{
  --bg:#f7e6c7;
  --card:#fff7e6;
  --border:#e6c89a;
  --text:#3a2a2a;
  --muted:#7a5a4f;
  --accent:#f4a63a;
  --accent2:#ffd08a;
  --danger:#b94a48;
  --good:#2f7d32;
  --shadow:0 10px 26px rgba(0,0,0,.12);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:linear-gradient(#fdeccf,#f7e6c7);
  font-family:"Noto Sans TC",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  -webkit-text-size-adjust:100%;
  -webkit-tap-highlight-color:transparent;
  user-select:none;
  -webkit-user-select:none;
  -webkit-touch-callout:none;
}

button, input, textarea{
  font:inherit;
  -webkit-tap-highlight-color:transparent;
}

.app-wrap{
  max-width:480px;
  min-height:100vh;
  margin:0 auto;
  padding:10px 12px 18px;
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:rgba(255,247,230,.9);
  border:2px solid var(--border);
  border-radius:18px;
  padding:10px 12px;
  box-shadow:var(--shadow);
  position:sticky;
  top:10px;
  z-index:10;
}

.brand-title{ font-weight:900; letter-spacing:.2px; }
.brand-sub{ font-size:12px; color:var(--muted); margin-top:2px; }

.top-actions{ display:flex; gap:8px; }
.icon-btn{
  width:44px;height:44px;
  border-radius:14px;
  border:2px solid var(--border);
  background:#fff;
  box-shadow:0 6px 12px rgba(0,0,0,.08);
  font-size:20px;
}

.screen{ display:none; margin-top:12px; }
.screen.active{ display:block; }

.card{
  background:var(--card);
  border:2px solid var(--border);
  border-radius:22px;
  padding:14px;
  box-shadow:var(--shadow);
}

h2{ margin:0 0 10px; }

.row{ display:flex; }
.between{ justify-content:space-between; }
.center{ align-items:center; }
.gap{ gap:10px; }

.pill{
  background:#fff;
  border:2px solid var(--border);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  color:var(--muted);
}

.block{ margin-top:12px; }
.label{ font-weight:800; margin-bottom:6px; }
.hint{ color:var(--muted); font-size:12px; line-height:1.5; }
.warn{ color:var(--danger); font-weight:800; margin-bottom:8px; }
.hidden{ display:none !important; }

.big-num{ font-weight:900; }
.chips{ display:flex; flex-wrap:wrap; gap:8px; }
.chip{
  background:#fff;
  border:2px solid var(--border);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
}

.btn{
  border-radius:999px;
  padding:10px 14px;
  border:2px solid var(--border);
  background:#fff;
  box-shadow:0 8px 18px rgba(0,0,0,.10);
  font-weight:800;
  touch-action:manipulation;
}
.btn.primary{
  background:var(--accent);
  border-color:#e0962f;
  color:#3b2a1a;
}
.btn.ghost{
  background:#fff;
}
.btn.small{ padding:8px 12px; font-size:13px; }
.btn.big{ width:100%; margin-top:12px; padding:14px 16px; font-size:16px; }

.btn:disabled{
  opacity:.55;
  filter:grayscale(.2);
}

.btn.active{
  outline:3px solid rgba(244,166,58,.35);
}

.panel{
  background:#fff;
  border:2px solid var(--border);
  border-radius:18px;
  padding:10px 12px;
  margin-top:10px;
}

.script{
  margin:8px 0 0;
  white-space:pre-wrap;
  font-size:13px;
  line-height:1.6;
}

.seatbox{ margin-top:12px; }
.seatgrid{
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:10px;
  margin-top:10px;
}

.seat{
  height:46px;
  border-radius:14px;
  border:2px solid var(--border);
  background:#fff;
  box-shadow:0 6px 12px rgba(0,0,0,.06);
  font-weight:900;
  color:#245aa7;
  touch-action:manipulation;
}
.seat.selected{
  background:#ffd08a;
  border-color:#e6a14c;
  color:#3b2a1a;
}
.seat.dead{
  background:#f1f1f1;
  color:#9aa0a6;
  border-style:dashed;
}
.seat.disabled{
  opacity:.55;
}

.reveal-pad{
  width:100%;
  border-radius:18px;
  border:2px dashed #caa97b;
  padding:14px 12px;
  background:#fff;
  margin-top:10px;
}
.reveal-title{ font-weight:900; color:#245aa7; }
.reveal-sub{ margin-top:6px; font-size:12px; color:var(--muted); }

.modal{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  z-index:1000;
  background:rgba(0,0,0,.28);
}
.modal.hidden{ display:none; }
.modal-card{
  width:100%;
  max-width:420px;
  background:#fff;
  border:2px solid var(--border);
  border-radius:20px;
  padding:12px;
  box-shadow:0 18px 40px rgba(0,0,0,.22);
}
.modal-card.wide{ max-width:460px; }
.modal-title{ font-weight:900; }
.modal-mask{
  position:fixed;
  inset:0;
}

.reveal-role{
  margin-top:10px;
  font-size:20px;
  font-weight:1000;
  padding:12px;
  border-radius:16px;
  background:#fff7e6;
  border:2px solid var(--border);
}

.tabs{
  display:flex;
  gap:10px;
  margin-top:10px;
}
.tab{
  flex:1;
  border-radius:999px;
  padding:8px 10px;
  border:2px solid var(--border);
  background:#fff;
  font-weight:900;
}
.tab.active{
  background:#ffd08a;
  border-color:#e6a14c;
}

.annbox{
  margin-top:10px;
  border-radius:16px;
  border:2px solid var(--border);
  background:#fff7e6;
  padding:10px;
  height:44vh;              /* ✅ 可捲動，不會滿版卡死 */
  overflow:auto;            /* ✅ 捲軸 */
  white-space:pre-wrap;
  line-height:1.6;
  font-size:13px;
}

.endtext{
  margin-top:12px;
  padding:12px;
  border-radius:16px;
  border:2px solid var(--border);
  background:#fff7e6;
  font-weight:900;
  white-space:pre-wrap;
}