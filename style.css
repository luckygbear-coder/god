/* =========================================================
   ç‹¼äººæ®ºï½œä¸Šå¸è¼”åŠ© PWAï¼ˆstyle.cssï¼‰
   âœ… ç«¥è©±æ¡ŒéŠé¢¨
   âœ… æ‰‹æ©Ÿä¸æ²è»¸ï¼ˆapp-shell + screen å›ºå®šé«˜åº¦ï¼‰
   âœ… åº§ä½åœ“é» / é¸å– / é«˜äº® / æ­»äº¡ç°
   âœ… Modal å½ˆçª—ï¼ˆå…¬å‘Š/å¥³å·«/ä¸Šå¸PIN/è§’è‰²èª¿æ•´ï¼‰
   âœ… god-on æ·±è‰²æ¨¡å¼ï¼ˆé¿å…èª¤çµ¦ç©å®¶çœ‹ï¼‰
   âœ… é˜² iOS é•·æŒ‰æ”¾å¤§/é¸å­—ï¼ˆé…åˆ app.jsï¼‰
========================================================= */

/* ---------- iOS / Mobile é˜²å‘† ---------- */
* {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none; /* ç¦æ­¢é•·æŒ‰è·³å‡ºé¸å–® */
  touch-action: manipulation;  /* é¿å…é›™æ“Šæ”¾å¤§ */
}
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; /* âœ… æ•´é«”ä¸æ²è»¸ */
  background: #ffeec9;
  font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color: #3b2a1e;
}

/* ---------- App Shell ---------- */
.app-shell {
  height: 100vh;
  height: 100dvh; /* iOS 16+ */
  display: flex;
  flex-direction: column;
  max-width: 520px;
  margin: 0 auto;
  background: radial-gradient(circle at 20% 0%, #fff7e6 0%, #ffe6b3 45%, #ffeec9 100%);
  position: relative;
  box-sizing: border-box;
}

/* ---------- Topbar ---------- */
.topbar {
  padding: 10px 12px 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  box-sizing: border-box;
  border-bottom: 2px solid rgba(0,0,0,.06);
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.35));
  backdrop-filter: blur(10px);
}

.brand-title {
  font-weight: 1000;
  font-size: 16px;
  letter-spacing: .2px;
}
.brand-sub {
  font-size: 12px;
  opacity: .75;
}

.top-actions {
  display: flex;
  gap: 10px;
}

/* ---------- Main screens ---------- */
.main {
  flex: 1;
  position: relative;
}

.screen {
  position: absolute;
  inset: 0;
  padding: 12px;
  box-sizing: border-box;
  display: none;
}

.screen.active {
  display: block;
}

/* ---------- Cards ---------- */
.card {
  background: rgba(255, 255, 255, .80);
  border: 2px solid rgba(0,0,0,.08);
  border-radius: 18px;
  box-shadow: 0 10px 24px rgba(0,0,0,.12);
  padding: 14px;
  box-sizing: border-box;
}

.card h2 {
  margin: 0 0 10px;
  font-size: 18px;
  font-weight: 1000;
}

.card.inner {
  margin-top: 10px;
  background: rgba(255, 250, 235, .86);
  border-radius: 16px;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.06);
}

.label {
  font-weight: 900;
  font-size: 13px;
  margin-bottom: 6px;
}

.hint {
  font-size: 13px;
  line-height: 1.5;
  opacity: .85;
}
.hint.small { font-size: 12px; opacity: .75; }

.warn {
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255, 80, 80, .12);
  border: 1px solid rgba(255, 80, 80, .25);
  font-weight: 900;
}

.hidden { display: none !important; }

/* ---------- Rows ---------- */
.row {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}
.row.spread { justify-content: space-between; }

/* ---------- Pills ---------- */
.pill {
  border: 2px solid rgba(0,0,0,.08);
  background: rgba(255,255,255,.75);
  border-radius: 999px;
  padding: 8px 12px;
  font-weight: 900;
  cursor: pointer;
}
.pill.active {
  background: rgba(244,166,58,.20);
  border-color: rgba(244,166,58,.45);
}

/* ---------- Buttons ---------- */
.btn {
  border: none;
  border-radius: 14px;
  padding: 10px 12px;
  font-weight: 1000;
  cursor: pointer;
  background: rgba(255,255,255,.75);
  border: 2px solid rgba(0,0,0,.10);
  box-shadow: 0 6px 14px rgba(0,0,0,.10);
}
.btn:active { transform: translateY(1px); }

.btn.primary {
  background: linear-gradient(180deg, #ffcc66, #f4a63a);
  border-color: rgba(0,0,0,.10);
}

.btn.ghost {
  background: rgba(255,255,255,.40);
}

.btn:disabled {
  opacity: .55;
  cursor: not-allowed;
  box-shadow: none;
}

.iconbtn {
  width: 42px;
  height: 42px;
  border-radius: 14px;
  border: 2px solid rgba(0,0,0,.10);
  background: rgba(255,255,255,.70);
  cursor: pointer;
  font-size: 18px;
}

/* ---------- Range + big number ---------- */
.range {
  width: 100%;
  margin-top: 8px;
}
.big-num {
  font-size: 26px;
  font-weight: 1000;
  padding: 2px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,.55);
  border: 2px solid rgba(0,0,0,.08);
}

/* ---------- Bottom bar (å›ºå®šåº•éƒ¨æ“ä½œåˆ—) ---------- */
.bottombar {
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: 12px;
  display: flex;
  gap: 10px;
}
.bottombar .btn {
  flex: 1;
  padding: 12px 12px;
  border-radius: 16px;
}

/* ---------- Deal UI ---------- */
.deal-area {
  margin-top: 12px;
  display: flex;
  justify-content: center;
}

.hold-btn {
  width: 100%;
  padding: 18px 14px;
  border-radius: 18px;
  border: 2px dashed rgba(0,0,0,.18);
  background: rgba(255,255,255,.55);
  font-weight: 1000;
  cursor: pointer;
}
.hold-btn:active {
  background: rgba(244,166,58,.18);
}

/* ---------- Seats (åœ“é»åº§ä½) ---------- */
.seats {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 10px;
}

@media (max-width: 420px) {
  .seats { grid-template-columns: repeat(5, 1fr); }
}
@media (max-width: 360px) {
  .seats { grid-template-columns: repeat(4, 1fr); }
}

.seat {
  width: 100%;
  aspect-ratio: 1 / 1;
  border-radius: 999px;
  border: 2px solid rgba(0,0,0,.12);
  background: rgba(255,255,255,.78);
  font-weight: 1000;
  font-size: 16px;
  cursor: pointer;
  box-shadow: 0 8px 16px rgba(0,0,0,.10);
  user-select: none;
  -webkit-user-select: none;
}

.seat.selected {
  outline: 4px solid rgba(244,166,58,.45);
  border-color: rgba(244,166,58,.70);
}

.seat.highlight {
  outline: 4px solid rgba(80, 160, 255, .45);
  border-color: rgba(80, 160, 255, .60);
}

.seat.dead {
  background: rgba(0,0,0,.08);
  border-color: rgba(0,0,0,.10);
  color: rgba(0,0,0,.45);
  box-shadow: none;
  cursor: not-allowed;
}

.seat.disabled {
  opacity: .55;
  cursor: not-allowed;
  box-shadow: none;
}

/* Chief icon (å¯ç”¨ class chief) */
.seat.chief::after {
  content: "ğŸ‘‘";
  display: block;
  font-size: 14px;
  margin-top: -2px;
  opacity: .95;
}

/* ---------- Tag ---------- */
.tag {
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 1000;
  font-size: 12px;
  background: rgba(244,166,58,.18);
  border: 1px solid rgba(244,166,58,.35);
}

/* ---------- Script box ---------- */
.scriptbox {
  min-height: 90px;
  white-space: pre-line;
  line-height: 1.6;
  padding: 12px;
  border-radius: 14px;
  background: rgba(255,255,255,.60);
  border: 1px solid rgba(0,0,0,.08);
}

/* ---------- FAB ---------- */
.fab {
  position: absolute;
  right: 12px;
  width: 52px;
  height: 52px;
  border-radius: 18px;
  border: 2px solid rgba(0,0,0,.10);
  background: rgba(255,255,255,.75);
  box-shadow: 0 12px 22px rgba(0,0,0,.18);
  cursor: pointer;
  font-size: 20px;
}
.fab:active { transform: translateY(1px); }

.fab-god { bottom: 78px; }
.fab-ann { bottom: 18px; }

/* ---------- Modal ---------- */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(15, 10, 8, .35);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 14px;
  box-sizing: border-box;
  z-index: 999;
}

.modal.hidden { display: none; }

.modal-card {
  width: min(520px, 100%);
  max-height: 82vh;
  border-radius: 18px;
  border: 2px solid rgba(0,0,0,.12);
  background: rgba(255,255,255,.92);
  box-shadow: 0 18px 40px rgba(0,0,0,.28);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-head {
  padding: 12px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.70));
  border-bottom: 1px solid rgba(0,0,0,.08);
}

.modal-title {
  font-weight: 1000;
  font-size: 15px;
}

.modal-body {
  padding: 12px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.modal-actions {
  padding: 12px;
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  border-top: 1px solid rgba(0,0,0,.08);
  background: rgba(255,255,255,.65);
}

.center { text-align: center; }

/* ---------- Inputs ---------- */
.input {
  width: 100%;
  padding: 12px 12px;
  border-radius: 14px;
  border: 2px solid rgba(0,0,0,.10);
  background: rgba(255,255,255,.70);
  font-weight: 900;
  font-size: 16px;
  box-sizing: border-box;
}

/* ---------- Announcement box ---------- */
.annbox {
  margin: 10px 0 0;
  white-space: pre-wrap;
  line-height: 1.6;
  padding: 12px;
  border-radius: 14px;
  background: rgba(255,255,255,.65);
  border: 1px solid rgba(0,0,0,.10);
  font-size: 13px;
}

/* ---------- Reveal card ---------- */
.reveal-card {
  max-height: 45vh;
}

.reveal-title {
  font-size: 13px;
  opacity: .85;
  font-weight: 900;
  margin-top: 8px;
}

.reveal-role {
  margin: 12px 0 6px;
  font-size: 26px;
  font-weight: 1000;
}

/* ---------- God view (æ·±è‰²æ¨¡å¼ï¼šé¿å…èª¤éœ²) ---------- */
body.god-on .app-shell {
  background: radial-gradient(circle at 20% 0%, #242424 0%, #191919 60%, #101010 100%);
  color: #f4eee6;
}
body.god-on .topbar {
  background: linear-gradient(180deg, rgba(30,30,30,.88), rgba(30,30,30,.55));
  border-bottom-color: rgba(255,255,255,.08);
}
body.god-on .card {
  background: rgba(28,28,28,.75);
  border-color: rgba(255,255,255,.10);
  box-shadow: 0 10px 28px rgba(0,0,0,.45);
}
body.god-on .card.inner {
  background: rgba(20,20,20,.65);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
}
body.god-on .btn,
body.god-on .iconbtn,
body.god-on .seat,
body.god-on .hold-btn,
body.god-on .input,
body.god-on .annbox,
body.god-on .scriptbox {
  background: rgba(255,255,255,.10);
  border-color: rgba(255,255,255,.12);
  color: #f4eee6;
}
body.god-on .btn.primary {
  background: linear-gradient(180deg, rgba(244,166,58,.95), rgba(200,120,20,.95));
}

/* ---------- å°ç´°ç¯€ï¼šé¿å…åº•éƒ¨è¢« iPhone home indicator æ“‹ä½ ---------- */
@supports(padding: max(0px)) {
  .bottombar {
    bottom: max(12px, env(safe-area-inset-bottom));
  }
  .fab-ann { bottom: max(18px, env(safe-area-inset-bottom)); }
  .fab-god { bottom: max(78px, calc(env(safe-area-inset-bottom) + 60px)); }
}
.hidden { display: none !important; }
.modal.hidden { display: none !important; }

/* å¦‚æœä½ æœ‰ç”¨åˆ° backdrop */
.backdrop.hidden { display: none !important; }

/* é˜²å‘†ï¼šéš±è—æ™‚ä¸è¦åƒé»æ“Š */
.modal.hidden, .backdrop.hidden { pointer-events: none !important; }